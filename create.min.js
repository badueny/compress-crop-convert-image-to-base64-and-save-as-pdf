function addPdfPage(e,t){var a=$make("div");a.id="img"+e,a.style.backgroundImage="url("+t+")",a.classList.add("block"),a.dataset.pagesrc=t,a.dataset.index=e;var r=new Image;r.onload=(e=>{pdfPages.push({src:t,height:r.height,width:r.width})}),r.src=t,a.innerHTML='<button class="btn-del" onclick="removeDiv('+e+')">Delete</button> <button class="btn-crop" onclick="cropperImg('+e+')">Crop</button> <a class="btn-downld" href="'+t+'" download="compress-img-'+e+'.png">Download</a><input type="hidden" value="'+t+'" id="imgBase64'+e+'"/> <button class="btn-b64" onclick="copyBase64('+e+')">Copy Base64 Img</button> ',$("#caller_to_cam").remove(),$("#tray_for_pgs").append(a);var n=$make("div");n.classList.add("block","adder_to_page_pdf"),n.setAttribute("onclick","callCam()"),$("div.main.block_disp").append(n),n.id="caller_to_cam",n.style.backgroundSize="50px 50px"}function cropperImg(e){var t=document.querySelector("#img"+e).getAttribute("data-pagesrc");makeInterfaceCropper(t,e)}function removeDiv(e){var t=document.getElementById("img"+e);t.remove(),delete pdfPages[e]}function arrayRemove(e,t){return e.filter(function(e){return e!=t})}function syncCreatePage(){var e=0;pdfPages.forEach(t=>{var a=$make("div");a.id="img"+e,a.dataset.id=e,a.style.backgroundImage="url("+t.src+")",a.dataset.pagesrc=t.src,a.dataset.index=e;var r=e;e+=1,a.classList.add("block"),a.innerHTML='<button class="btn-del" onclick="removeDiv('+r+')">Delete</button> <button class="btn-crop" onclick="cropperImg('+r+')">Crop</button><a href="'+t.src+'" class="btn-downld" download="compress-img-'+r+'.png">Download</a><input type="hidden" value="'+t.src+'" id="imgBase64'+r+'"/> <button class="btn-b64" onclick="copyBase64('+r+')">Copy Base64 Img</button> ',$("#caller_to_cam").remove(),$("#tray_for_pgs").append(a);var n=$make("div");n.classList.add("block","adder_to_page_pdf"),n.setAttribute("onclick","callCam()"),$("div.main.block_disp").append(n),n.id="caller_to_cam",n.style.backgroundSize="50px 50px"})}function uploader(e){console.log("change occured");let t=pdfPages.length||0;Object.values(e.files).forEach(e=>{var a=new FileReader;a.onloadend=function(){a.result.includes("image/png")||a.result.includes("image/jpg")||a.result.includes("image/jpeg")?compressImage(e,function(e){addPdfPage(t,e),document.getElementById("progress").value=0,t++}):$("#toast").MaterialSnackbar.showSnackbar({message:"this file is not supported ~ "+e.name})},a.readAsDataURL(e)})}function correctIt(e){let t="*\"?/* .'[]:;|,";t=t.split("");for(let a of t)e.value.includes(a)&&(e.value=e.value.replaceAll(a,"_"),navigator.vibrate(100))}function copyBase64(e){var t=document.getElementById("imgBase64"+e);t.select(),navigator.clipboard.writeText(t.value),alert(t.value)}$make=(e=>document.createElement(e));var pdfPages=[],watermark="";callCam=(()=>{$("#uploader").click()}),makeInterfaceCropper=((e,t)=>{var a;Ted().alert({title:"Crop Image",html:!0,content:`\n  \t\t\t\t<img src=${e} style="max-width:70vw; height:auto;" id="cropper-js-impl">\n  \t\t\t\t`,btns:[{val:"Crop",fun:e=>{var r=new Image;r.onload=(()=>{pdfPages[t].src=a.getCroppedCanvas().toDataURL(),pdfPages[t].height=r.height,pdfPages[t].width=r.width,$("button#pdf-create").click(),del(e)}),r.src=a.getCroppedCanvas().toDataURL()}}]}),a=new Cropper($("#cropper-js-impl"))}),window.jsPDF=window.jspdf.jsPDF;var prerenderPdf=()=>{pdfPages.length>0?($(".loader").style.opacity="1",$(".loader").style.zIndex="500",setTimeout(renderPdf,100)):Ted().alert({title:"Info",content:"Please Add one or more image file",closeBtn:!0})},renderPdf=()=>{var e=new jsPDF("p","mm","a4");if(pdfPages.length>0){for(let t of pdfPages)if(null!=t){let a,r,n,o={h:290,w:200};if(o.h<t.height||o.w<t.width){let e=t.height/3.7,l=t.width/3.7;e>l?(n=0,rat=e/l,e=o.h,l=e/rat):l>=e&&(n=5,rat=l/e,l=o.w,e=l/rat),a=e,r=l}else a=t.height,r=t.width;e.addImage(t.src,"png",n,5,r,a),e.addPage("p","mm","a4")}Ted().alert({title:"Save as PDF",html:!0,content:'\n\t\t\t\t<input  type="text" id="name_here" placeholder="Insert File Name..." style="width:30vw;border:0;box-shadow: 0 0 0 1px #6c6c6c, 0 1px 1px #efe;outline:none;background:transparent;color:var(--txt-c);" oninput="correctIt(this)">\n\t\t\t\t\t\t\t\t\t',btns:[{val:"Save",fun:t=>{e.setTextColor(102,16,242),e.setFontSize(10),e.save($("#name_here").value+".pdf"),sessionStorage.currName=$("#name_here").value+".pdf",$(".loader").style.opacity="",$(".loader").style.zIndex="",del(t),pdfPages=[],$("button#pdf-create").click()}},{val:"Cancel",fun:e=>{$(".loader").style.opacity="",$(".loader").style.zIndex="",del(e)}}],closeBtn:!1})}};