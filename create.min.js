$make=e=>document.createElement(e);var pdfPages=[],watermark="",oriSize=0,compSize=0;function addPdfPage(e,t){var a=$make("div");a.id="img"+e,a.style.backgroundImage="url("+t+")",a.classList.add("block"),a.dataset.pagesrc=t,a.dataset.index=e;var o=new Image;o.onload=e=>{pdfPages.push({src:t,height:o.height,width:o.width})},o.src=t,a.innerHTML='<button class="btn-del" onclick="removeDiv('+e+')">Delete</button> <button class="btn-crop" onclick="cropperImg('+e+')">Crop</button> <a class="btn-downld" href="'+t+'" download="compress-img-'+e+'.png">Download</a><input type="hidden" value="'+t+'" id="imgBase64'+e+'"/> <button class="btn-b64" onclick="copyBase64('+e+')">Copy Base64 Img</button> <br><small style="color: white;background-color: #032121;font-size: 0.7em;">'+oriSize+" | "+compSize+"</small> ",$("#caller_to_cam").remove(),$("#tray_for_pgs").append(a);var r=$make("div");r.classList.add("block","adder_to_page_pdf"),r.setAttribute("onclick","callCam()"),$("div.main.block_disp").append(r),r.id="caller_to_cam",r.style.backgroundSize="50px 50px"}function cropperImg(e){var t=document.querySelector("#img"+e).getAttribute("data-pagesrc");makeInterfaceCropper(t,e)}function removeDiv(e){document.getElementById("img"+e).remove(),delete pdfPages[e]}function arrayRemove(e,t){return e.filter((function(e){return e!=t}))}function syncCreatePage(){var e=0;pdfPages.forEach((t=>{var a=$make("div");a.id="img"+e,a.dataset.id=e,a.style.backgroundImage="url("+t.src+")",a.dataset.pagesrc=t.src,a.dataset.index=e;var o=e;e+=1,a.classList.add("block"),a.innerHTML='<button class="btn-del" onclick="removeDiv('+o+')">Delete</button> <button class="btn-crop" onclick="cropperImg('+o+')">Crop</button><a href="'+t.src+'" class="btn-downld" download="compress-img-'+o+'.png">Download</a><input type="hidden" value="'+t.src+'" id="imgBase64'+o+'"/> <button class="btn-b64" onclick="copyBase64('+o+')">Copy Base64 Img</button> <br><small style="color: white;background-color: #032121;font-size: 0.7em;">'+oriSize+" | "+compSize+"</small> ",$("#caller_to_cam").remove(),$("#tray_for_pgs").append(a);var r=$make("div");r.classList.add("block","adder_to_page_pdf"),r.setAttribute("onclick","callCam()"),$("div.main.block_disp").append(r),r.id="caller_to_cam",r.style.backgroundSize="50px 50px"}))}function uploader(e){console.log("change occured");let t=pdfPages.length||0;Object.values(e.files).forEach((e=>{var a=new FileReader;a.onloadend=function(){var o=e.size/1024e3;oriSize="Original Size: "+(oriSize=o.toFixed(2))+"Mb",a.result.includes("image/png")||a.result.includes("image/jpg")||a.result.includes("image/jpeg")?compressImage(e,(function(e){var a=e.length-"data:image/png;base64,".length,o=4*Math.ceil(a/3)*.5624896334383812;compSize="Compressed Size: "+(o/1e3/1024).toFixed(2)+"Mb",addPdfPage(t,e),document.getElementById("progress").value=0,t++})):$("#toast").MaterialSnackbar.showSnackbar({message:"this file is not supported ~ "+e.name})},a.readAsDataURL(e)}))}callCam=()=>{$("#uploader").click()},makeInterfaceCropper=(e,t)=>{var a;Ted().alert({title:"Crop Image",html:!0,content:`\n  \t\t\t\t<img src=${e} style="max-width:70vw; height:auto;" id="cropper-js-impl">\n  \t\t\t\t`,btns:[{val:"Crop",fun:e=>{var o=new Image;o.onload=()=>{pdfPages[t].src=a.getCroppedCanvas().toDataURL(),pdfPages[t].height=o.height,pdfPages[t].width=o.width,$("button#pdf-create").click(),del(e)},o.src=a.getCroppedCanvas().toDataURL()}}]}),a=new Cropper($("#cropper-js-impl"))},window.jsPDF=window.jspdf.jsPDF;var prerenderPdf=()=>{pdfPages.length>0?($(".loader").style.opacity="1",$(".loader").style.zIndex="500",setTimeout(renderPdf,100)):Ted().alert({title:"Info",content:"Please Add one or more image file",closeBtn:!0})},renderPdf=()=>{var e=new jsPDF("p","mm","a4");if(pdfPages.length>0){for(let t of pdfPages)if(null!=t){let a,o,r,n={h:290,w:200};if(n.h<t.height||n.w<t.width){let e=t.height/3.7,l=t.width/3.7;e>l?(r=0,rat=e/l,e=n.h,l=e/rat):l>=e&&(r=5,rat=l/e,l=n.w,e=l/rat),a=e,o=l}else a=t.height,o=t.width;e.addImage(t.src,"png",r,5,o,a),e.addPage("p","mm","a4")}Ted().alert({title:"Save as PDF",html:!0,content:'\n\t\t\t\t<input  type="text" id="name_here" placeholder="Insert File Name..." style="width:30vw;border:0;box-shadow: 0 0 0 1px #6c6c6c, 0 1px 1px #efe;outline:none;background:transparent;color:var(--txt-c);" oninput="correctIt(this)">\n\t\t\t\t\t\t\t\t\t',btns:[{val:"Save",fun:t=>{e.setTextColor(102,16,242),e.setFontSize(10),e.save($("#name_here").value+".pdf"),sessionStorage.currName=$("#name_here").value+".pdf",$(".loader").style.opacity="",$(".loader").style.zIndex="",del(t),pdfPages=[],$("button#pdf-create").click()}},{val:"Cancel",fun:e=>{$(".loader").style.opacity="",$(".loader").style.zIndex="",del(e)}}],closeBtn:!1})}};function correctIt(e){let t="*\"?/* .'[]:;|,";t=t.split("");for(let a of t)e.value.includes(a)&&(e.value=e.value.replaceAll(a,"_"),navigator.vibrate(100))}function copyBase64(e){var t=document.getElementById("imgBase64"+e);t.select(),navigator.clipboard.writeText(t.value),alert(t.value)}